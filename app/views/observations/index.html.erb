<div id='map'></div>

<!-- 
<script type="text/javascript">
  $(function() {
    console.log("Hey!");
    App.router = new App.Router();
        Backbone.history.start();
  });
</script> -->

<style> #map { display:block; width:100%; height:100%; } </style>
<script>
  
  $(window).load(function() {

    function resizeMap() {
      var pageWidth = $(window).innerWidth();
      var pageHeight = $(window).innerHeight();
    
      var mapWidth = pageWidth;
      var mapHeight = pageHeight - 64;
    
      var mapContainer = $('#map');
      mapContainer.width(mapWidth);
      mapContainer.height(mapHeight);
    }
    
    resizeMap();

    $(window).resize(function() { resizeMap(); });

    var map = L.mapbox.map('map', 'examples.map-i86nkdio', {center: [-33.86918,151.215727], zoom: 13});
    var sightings = new App.Sightings();
    var geoJSON = sightings.toGeoJSON();

    var featureLayer = L.mapbox.featureLayer(geoJSON).addTo(map);
    featureLayer.on('click', function(e){
      e.layer.openPopup();
    });
  });
  
  
</script>